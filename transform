

Write a python application that enables bioassay plate re-arrays / transfer, such as those you might see from an ECHO acoustic liquid dispenser (just an example). 

APP PART A – Define a re-array transformation

Include widget for 96 vs 384 well plates independently for source and dest plates. Each plate should be nameable using a text entry box. Each plate also has a text entry box for carrier location. Source plates should appear from top to bottom in a left column and dest plates from top to bottom in a right column. I should be able to select the number of source or destination plates near the top of the page. Transfers should allow me to color by source well (use turbo fill), and interactive highlighting of source and destination wells to map out a transfer. The transfer should generate a .csv worklist for download. This worklist should include plate names and location info. 

Ensure reactivity is working well. I want to be able to click a single well in the source plate, and then click several wells (not currently possible) in the second plate to establish a transfer. Alternatively, if i click multiple source wells in the source plate will enable me to then click a well in the destination plate, and then place the samples either in the same orientation or transposed up or down using a paste button.

Color management:
1) Color should match in source and destination wells to show transfers
2) Color scheme should be turbo with alpha =0.8
3) Color usage should cycle through the turbo rainbow every 32 samples

Ensure that selecting cells in the destination plate does not require too much clicking. Also, i should be able to highlight cells in the destination plate by clicking several cells. eg if i select 4 wells in a source plate, and then click 4 cells in the dest plate, i should be able to create the transfer in any orientation (even totally random locations in the dest plate). Once I paste the cells, the cells in the source plate should remain selected until i re-select cells in the source plate. If I’ve selected multiple source and dest wells, a button should appear for such a re-array, but only be available to press if the number of cells in source and dest are the same.  

Transforms when pasting into the destination plate:
	type 1 transforms – flip / rotate
1) Same orientation (default)
2) rotate 90degrees
3) rotate -90degrees
4) rotate 180 degrees
5) flip on diagonal (x = -y … so top left becomes bottom right)
6) flip on diagonal (x = y … so top right becomes bottom left)

	Type 2 transforms – checkerboard and space
1) Do not condense (this is on automatically in cases where the source is 96-well and dest plate is 384-well). Samples are pasted as if stamped by a 96 well head, which will leave empty wells between each destination well with a sample.
2) Condense (this should be the default if source and destination are both 96 well or if both are 384). There are no empty wells created in between samples. 
2) Checkerboard - distribute on the plate such that samples are on a diagonal from each other (so shift every other row to the right by one well).

Once I’ve created a re-array pattern, I should be able to save it and download it as a .pkl file. I should be able to re-load the re-array at the top of the app within a ‘load a re-array pickle file’. Also, any saved re-array should require a name, which becomes. Once a pkl file is saved. It should go to a folder in the same directory with the app in a folder called ‘re-array mapping’. These re-arrays should be selectable in a drop-down menu in this re-array app part 2. 

The entire re-array mapping should be downloadable as a .csv file. Well format should be 3 digit only. (e.g. A04, H11, F05)

APP PART B – create a re-array of specific samples

The purpose of APP PART B is to use an existing re-array mapping created in APP PART A, and apply it to a source plate or set of source plates. This incorporates metadata and sample names to a re-array. App should offer the user a downloadable csv template with 3 headers: plate, well, and Attribute_1, Attribute_2, etc (thru Attribute_9) Make it clear to the user that the Attribute headers can be changed, but the plate and well headers should be locked. Attribute columns can also be removed or added to. Throw an error when the table is reloaded and ‘plate’ and ‘well’ headers are not both present. If wells are in 2-3 digit format (e.g. B4, C7, H12) digit, change to 3-digit (e.g. A04, H11, F05). Do a join of this table (based on plate and well to the selected re-array transformation defined in APP PART A and selected above in APP PART B. 

The new re-array with sample metadata should be downloadable as a .csv file. Well format should be 3 digit only. (e.g. A04, H11, F05)

Go back and double check app quality and layout. Ensure there are not errors; refine reactivity and ease of use without excessive clicking. App formatting should included clear colored titles, sans serif font, and professional formatting. 
